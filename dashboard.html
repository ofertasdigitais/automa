<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - AutomaHost</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        :root {
            --azul-elegante: #0f172a;
            --azul-escuro: #0f172a;
            --azul-escuro-2: #1a2332;
            --azul-medio: #2d3748;
            --verde: #61ce70;
            --verde-escuro: #4ca85c;
            --cinza-claro: #f8fafc;
            --cinza: #64748b;
            --cinza-escuro: #1e293b;
            --branco: #ffffff;
            --azul: #3b82f6;
            --vermelho: #ef4444;
            --laranja: #f59e0b;
            --roxo: #8b5cf6;
        }

        body {
            background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
            color: var(--cinza-escuro);
            min-height: 100vh;
        }

        .dashboard-header {
            background: var(--branco);
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
            padding: 18px 35px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid #e2e8f0;
            backdrop-filter: blur(10px);
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .logo-img {
            height: 45px;
            filter: brightness(0.9);
        }

        .logo-text {
            display: flex;
            flex-direction: column;
        }

        .logo-text .main {
            font-size: 24px;
            font-weight: 700;
            color: var(--azul-escuro);
            letter-spacing: -0.5px;
        }

        .logo-text .sub {
            font-size: 12px;
            color: var(--cinza);
            font-weight: 500;
            letter-spacing: 0.5px;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .user-avatar {
            width: 44px;
            height: 44px;
            background: linear-gradient(135deg, var(--verde), var(--verde-escuro));
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 18px;
            box-shadow: 0 4px 15px rgba(97, 206, 112, 0.3);
            transition: all 0.3s ease;
            border: 2px solid rgba(255,255,255,0.2);
        }

        .user-avatar:hover {
            transform: scale(1.05) rotate(5deg);
            box-shadow: 0 6px 20px rgba(97, 206, 112, 0.4);
        }

        .dashboard-container {
            display: flex;
            min-height: calc(100vh - 80px);
        }

        .sidebar {
            width: 80px;
            background: linear-gradient(180deg, #0f172a 0%, #1a2332 100%);
            color: white;
            padding: 30px 0;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
            white-space: nowrap;
            border-right: 1px solid rgba(255,255,255,0.1);
            box-shadow: 4px 0 20px rgba(0,0,0,0.1);
            z-index: 1000;
        }

        .sidebar::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 2px;
            background: linear-gradient(90deg, var(--verde), var(--roxo));
        }

        .sidebar:hover {
            width: 280px;
            box-shadow: 8px 0 30px rgba(0,0,0,0.15);
        }

        .menu-item {
            padding: 16px 20px;
            display: flex;
            align-items: center;
            gap: 18px;
            text-decoration: none;
            color: #94a3b8;
            transition: all 0.3s ease;
            border-left: 3px solid transparent;
            cursor: pointer;
            position: relative;
            margin: 4px 10px;
            border-radius: 12px;
            justify-content: flex-start;
        }

        .menu-item::before {
            content: '';
            position: absolute;
            left: -10px;
            top: 50%;
            transform: translateY(-50%);
            width: 4px;
            height: 0;
            background: var(--verde);
            border-radius: 2px;
            transition: all 0.3s ease;
        }

        .menu-item:hover, .menu-item.active {
            background: linear-gradient(135deg, rgba(97, 206, 112, 0.15), rgba(139, 92, 246, 0.1));
            color: white;
            border-left-color: var(--verde);
            transform: translateX(5px);
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        .menu-item.active::before {
            height: 60%;
        }

        .menu-item:hover::before {
            height: 40%;
        }

        .menu-item i {
            width: 22px;
            text-align: center;
            font-size: 20px;
            flex-shrink: 0;
            transition: all 0.3s ease;
            margin: 0 auto;
        }

        .sidebar:hover .menu-item i {
            margin: 0;
        }

        .menu-item:hover i {
            transform: scale(1.1);
            color: var(--verde);
        }

        .menu-text {
            opacity: 0;
            transition: all 0.3s ease 0.1s;
            font-size: 14px;
            font-weight: 500;
            letter-spacing: 0.3px;
        }

        .sidebar:hover .menu-text {
            opacity: 1;
        }

        .menu-item::after {
            content: attr(data-tooltip);
            position: absolute;
            left: 100%;
            top: 50%;
            transform: translateY(-50%);
            background: var(--azul-elegante);
            color: white;
            padding: 10px 15px;
            border-radius: 8px;
            font-size: 13px;
            white-space: nowrap;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
            z-index: 1000;
            box-shadow: 0 4px 20px rgba(0,0,0,0.2);
            border: 1px solid rgba(255,255,255,0.1);
            font-weight: 500;
        }

        .menu-item:hover::after {
            opacity: 1;
            visibility: visible;
            left: 90px;
        }

        .sidebar:hover .menu-item::after {
            display: none;
        }

        .main-content {
            flex: 1;
            padding: 35px;
            transition: all 0.3s ease;
            background: transparent;
        }

        .page {
            display: none;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .page.active {
            display: block;
        }

        .welcome-section {
            background: linear-gradient(135deg, var(--verde), #0f172a);
            color: white;
            padding: 35px;
            border-radius: 20px;
            margin-bottom: 35px;
            box-shadow: 0 8px 30px rgba(15, 23, 42, 0.3);
            position: relative;
            overflow: hidden;
        }

        .welcome-section::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -20%;
            width: 300px;
            height: 300px;
            background: rgba(255,255,255,0.1);
            border-radius: 50%;
        }

        .welcome-section h1 {
            margin-bottom: 12px;
            font-size: 32px;
            font-weight: 700;
            position: relative;
        }

        .welcome-section p {
            font-size: 16px;
            opacity: 0.9;
            position: relative;
        }

        .services-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 25px;
            margin-bottom: 35px;
        }

        .service-card {
            background: var(--branco);
            padding: 28px;
            border-radius: 16px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
            transition: all 0.3s ease;
            border: 1px solid rgba(0,0,0,0.05);
            position: relative;
            overflow: hidden;
        }

        .service-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, var(--verde), var(--roxo));
        }

        .service-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 12px 40px rgba(0,0,0,0.15);
        }

        .service-card h3 {
            color: var(--azul-escuro);
            margin-bottom: 18px;
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 18px;
            font-weight: 600;
        }

        .service-card p {
            color: var(--cinza);
            margin-bottom: 20px;
            line-height: 1.6;
        }

        .btn {
            padding: 12px 24px;
            background: linear-gradient(135deg, var(--verde), var(--verde-escuro));
            color: white;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s ease;
            font-weight: 600;
            font-size: 14px;
            box-shadow: 0 4px 15px rgba(97, 206, 112, 0.3);
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(97, 206, 112, 0.4);
            background: linear-gradient(135deg, var(--verde-escuro), var(--verde));
        }

        .btn-outline {
            background: transparent;
            border: 2px solid var(--verde);
            color: var(--verde);
            box-shadow: none;
        }

        .btn-outline:hover {
            background: var(--verde);
            color: white;
        }

        .status-section {
            background: var(--branco);
            padding: 28px;
            border-radius: 16px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
            border: 1px solid rgba(0,0,0,0.05);
        }

        .status-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 18px 0;
            border-bottom: 1px solid #f1f5f9;
        }

        .status-item:last-child {
            border-bottom: none;
        }

        .status-badge {
            padding: 6px 16px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 600;
            letter-spacing: 0.5px;
        }

        .status-active {
            background: rgba(97, 206, 112, 0.1);
            color: var(--verde-escuro);
            border: 1px solid rgba(97, 206, 112, 0.3);
        }

        .status-pending {
            background: #fef3c7;
            color: #d97706;
            border: 1px solid rgba(245, 158, 11, 0.3);
        }

        .status-expired {
            background: #fee2e2;
            color: #dc2626;
            border: 1px solid rgba(239, 68, 68, 0.3);
        }

        .table {
            width: 100%;
            background: var(--branco);
            border-radius: 16px;
            overflow: hidden;
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
            margin-bottom: 30px;
            border: 1px solid rgba(0,0,0,0.05);
        }

        .table-header {
            background: var(--cinza-claro);
            padding: 20px;
            border-bottom: 1px solid #e2e8f0;
        }

        .table-header h3 {
            color: var(--azul-escuro);
            margin: 0;
            font-size: 18px;
            font-weight: 600;
        }

        .table-content {
            padding: 0;
        }

        .table-row {
            display: flex;
            padding: 18px 20px;
            border-bottom: 1px solid #f1f5f9;
            align-items: center;
            transition: all 0.3s ease;
        }

        .table-row:last-child {
            border-bottom: none;
        }

        .table-row:hover {
            background: #f8fafc;
        }

        .col {
            flex: 1;
            padding: 0 10px;
        }

        .col-2 {
            flex: 2;
        }

        .col-3 {
            flex: 3;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            color: var(--cinza-escuro);
            font-weight: 500;
        }

        .form-control {
            width: 100%;
            padding: 12px 16px;
            border: 1px solid #e2e8f0;
            border-radius: 10px;
            font-size: 14px;
            transition: all 0.3s ease;
            background: var(--branco);
        }

        .form-control:focus {
            border-color: var(--verde);
            outline: none;
            box-shadow: 0 0 0 3px rgba(97, 206, 112, 0.1);
        }

        .faq-item {
            background: var(--branco);
            border-radius: 12px;
            margin-bottom: 15px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            overflow: hidden;
            border: 1px solid rgba(0,0,0,0.05);
        }

        .faq-question {
            padding: 20px;
            background: var(--cinza-claro);
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-weight: 500;
            color: var(--azul-escuro);
            transition: all 0.3s ease;
        }

        .faq-question:hover {
            background: #f1f5f9;
        }

        .faq-answer {
            padding: 0 20px;
            max-height: 0;
            overflow: hidden;
            transition: all 0.3s ease;
            color: var(--cinza);
        }

        .faq-item.active .faq-answer {
            padding: 20px;
            max-height: 200px;
        }

        .grafico-container {
            position: relative;
            height: 250px;
            width: 100%;
            background: var(--branco);
            border-radius: 12px;
            padding: 15px;
        }

        .metric-card {
            background: var(--branco);
            padding: 25px;
            border-radius: 16px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
            text-align: center;
            border-left: 4px solid var(--verde);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .metric-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, var(--verde), var(--roxo));
        }

        .metric-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 30px rgba(0,0,0,0.12);
        }

        .metric-card.vermelho {
            border-left-color: var(--vermelho);
        }

        .metric-card.vermelho::before {
            background: linear-gradient(90deg, var(--vermelho), var(--laranja));
        }

        .metric-card.azul {
            border-left-color: var(--azul);
        }

        .metric-card.azul::before {
            background: linear-gradient(90deg, var(--azul), var(--roxo));
        }

        .metric-card.laranja {
            border-left-color: var(--laranja);
        }

        .metric-card.laranja::before {
            background: linear-gradient(90deg, var(--laranja), var(--vermelho));
        }

        .metric-value {
            font-size: 32px;
            font-weight: 700;
            margin: 15px 0;
            background: linear-gradient(135deg, var(--azul-escuro), var(--cinza-escuro));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .metric-label {
            color: var(--cinza);
            font-size: 14px;
            font-weight: 500;
        }

        .metric-trend {
            font-size: 13px;
            margin-top: 8px;
            font-weight: 600;
        }

        .trend-up {
            color: var(--verde);
        }

        .trend-down {
            color: var(--vermelho);
        }

        /* NOVOS ESTILOS PARA DASHBOARD AVANÇADO */
        .visualization-controls {
            display: flex;
            gap: 15px;
            margin-bottom: 25px;
            flex-wrap: wrap;
            align-items: center;
        }
        
        .view-type-selector {
            display: flex;
            background: var(--branco);
            border-radius: 10px;
            padding: 5px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }
        
        .view-type-btn {
            padding: 8px 15px;
            border: none;
            background: transparent;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 500;
            color: var(--cinza);
            transition: all 0.3s ease;
        }
        
        .view-type-btn.active {
            background: var(--verde);
            color: white;
        }
        
        .chart-grid {
            display: grid;
            gap: 25px;
            margin-bottom: 35px;
        }
        
        .grid-1 { grid-template-columns: 1fr; }
        .grid-2 { grid-template-columns: repeat(2, 1fr); }
        .grid-3 { grid-template-columns: repeat(3, 1fr); }
        .grid-4 { grid-template-columns: repeat(2, 1fr); }
        
        .chart-card {
            background: var(--branco);
            border-radius: 16px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
            transition: all 0.3s ease;
            border: 1px solid rgba(0,0,0,0.05);
            position: relative;
            overflow: hidden;
        }
        
        .chart-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, var(--verde), var(--roxo));
        }
        
        .chart-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 30px rgba(0,0,0,0.12);
        }
        
        .chart-header {
            padding: 20px 20px 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .chart-actions {
            display: flex;
            gap: 10px;
        }
        
        .chart-action-btn {
            background: transparent;
            border: none;
            color: var(--cinza);
            cursor: pointer;
            font-size: 16px;
            transition: all 0.3s ease;
            padding: 5px;
            border-radius: 5px;
        }
        
        .chart-action-btn:hover {
            color: var(--verde);
            background: rgba(97, 206, 112, 0.1);
        }
        
        .chart-container {
            position: relative;
            height: 300px;
            width: 100%;
            padding: 15px;
        }
        
        .chart-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.7);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }
        
        .chart-modal.active {
            display: flex;
        }
        
        .modal-content {
            background: var(--branco);
            border-radius: 16px;
            width: 90%;
            max-width: 1000px;
            max-height: 90vh;
            overflow: auto;
            padding: 25px;
            position: relative;
        }
        
        .modal-close {
            position: absolute;
            top: 15px;
            right: 15px;
            background: transparent;
            border: none;
            font-size: 24px;
            color: var(--cinza);
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .modal-close:hover {
            color: var(--vermelho);
        }
        
        .modal-chart-container {
            height: 500px;
            width: 100%;
        }
        
        .performance-indicators {
            display: flex;
            gap: 15px;
            margin-top: 15px;
            flex-wrap: wrap;
        }
        
        .performance-item {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 12px;
            background: var(--cinza-claro);
            border-radius: 8px;
            font-size: 14px;
        }
        
        .performance-item i {
            font-size: 16px;
        }
        
        .performance-positive {
            color: var(--verde);
        }
        
        .performance-negative {
            color: var(--vermelho);
        }
        
        .advanced-filters {
            background: var(--branco);
            border-radius: 16px;
            padding: 20px;
            margin-bottom: 25px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
        }
        
        .filter-group {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            align-items: center;
        }
        
        .filter-section {
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid #f1f5f9;
        }
        
        .filter-section:last-child {
            border-bottom: none;
            margin-bottom: 0;
            padding-bottom: 0;
        }
        
        .filter-section-title {
            font-weight: 600;
            margin-bottom: 10px;
            color: var(--azul-escuro);
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .chart-view {
            display: none;
            margin-top: 20px;
        }
        
        .chart-view.active {
            display: block;
        }

        /* Loading Spinner */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255,255,255,.3);
            border-radius: 50%;
            border-top-color: #fff;
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none !important;
        }

        /* Loading Overlay */
        .loading-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.7);
            z-index: 10000;
            justify-content: center;
            align-items: center;
        }

        .loading-overlay.active {
            display: flex;
        }

        .loading-content {
            background: white;
            padding: 30px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }

        .loading-content .loading {
            width: 40px;
            height: 40px;
            margin: 0 auto 15px;
            border-width: 4px;
        }

        @media (max-width: 1200px) {
            .grid-3, .grid-4 { grid-template-columns: repeat(2, 1fr); }
        }
        
        @media (max-width: 768px) {
            .dashboard-container {
                flex-direction: column;
            }

            .sidebar {
                width: 100%;
                padding: 20px 0;
            }

            .sidebar:hover {
                width: 100%;
            }

            .menu-text {
                opacity: 1;
            }

            .menu-item::after {
                display: none;
            }

            .services-grid {
                grid-template-columns: 1fr;
            }

            .dashboard-header {
                padding: 15px 20px;
            }

            .main-content {
                padding: 20px;
            }

            .user-info span {
                display: none;
            }

            .logo-text .main {
                font-size: 20px;
            }

            .logo-text .sub {
                font-size: 10px;
            }

            .table-row {
                flex-direction: column;
                gap: 10px;
                text-align: center;
            }

            .col {
                width: 100%;
            }
            
            .grid-2, .grid-3, .grid-4 { grid-template-columns: 1fr; }
            
            .visualization-controls {
                flex-direction: column;
                align-items: flex-start;
                gap: 10px;
            }
            
            .filter-group {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .filter-group select,
            .filter-group input {
                width: 100%;
            }
            
            .chart-view {
                margin-top: 15px;
            }
        }

        /* CORREÇÃO PARA O BUG DO MENU LATERAL */
        .sidebar {
            pointer-events: auto !important;
        }
        
        .sidebar:hover, 
        .sidebar:focus-within,
        .sidebar:active {
            width: 280px !important;
            box-shadow: 8px 0 30px rgba(0,0,0,0.15) !important;
        }
    </style>
</head>
<body>
    <!-- LOADING OVERLAY -->
    <div class="loading-overlay" id="loadingOverlay">
        <div class="loading-content">
            <div class="loading"></div>
            <p>Carregando...</p>
        </div>
    </div>

    <!-- HEADER -->
    <header class="dashboard-header">
        <div class="logo">
            <img src="https://ofertasdigitais.github.io/automa/logo.png" alt="AutomaHost" class="logo-img">
            <div class="logo-text">
                <div class="main">AutomaHost</div>
                <div class="sub">Soluções Inteligentes</div>
            </div>
        </div>
        <div class="user-info">
            <span id="userGreeting">Carregando...</span>
            <div class="user-avatar">
                <i class="fas fa-user-cog"></i>
            </div>
        </div>
    </header>

    <!-- LAYOUT PRINCIPAL -->
    <div class="dashboard-container">
        <!-- MENU LATERAL -->
        <nav class="sidebar">
            <a class="menu-item active" data-page="inicio" data-tooltip="Início">
                <i class="fas fa-home"></i>
                <span class="menu-text">Início</span>
            </a>
            <a class="menu-item" data-page="dashboard" data-tooltip="Dashboard">
                <i class="fas fa-chart-bar"></i>
                <span class="menu-text">Dashboard</span>
            </a>
            <a class="menu-item" data-page="perfil" data-tooltip="Perfil">
                <i class="fas fa-user"></i>
                <span class="menu-text">Perfil</span>
            </a>
            <a class="menu-item" data-page="pagamentos" data-tooltip="Pagamentos">
                <i class="fas fa-credit-card"></i>
                <span class="menu-text">Pagamentos</span>
            </a>
            <a class="menu-item" data-page="ajuda" data-tooltip="Ajuda & Suporte">
                <i class="fas fa-headset"></i>
                <span class="menu-text">Ajuda & Suporte</span>
            </a>
            <a class="menu-item" data-page="servicos" data-tooltip="Meus Serviços">
                <i class="fas fa-server"></i>
                <span class="menu-text">Meus Serviços</span>
            </a>
            <a class="menu-item" data-page="faturas" data-tooltip="Faturas">
                <i class="fas fa-file-invoice"></i>
                <span class="menu-text">Faturas</span>
            </a>
            <a class="menu-item" id="logoutBtn" style="margin-top: 25px; color: #fca5a5;" data-tooltip="Sair">
                <i class="fas fa-sign-out-alt"></i>
                <span class="menu-text">Sair</span>
            </a>
        </nav>

        <!-- CONTEÚDO PRINCIPAL -->
        <main class="main-content">
            <!-- INÍCIO -->
            <div id="inicio" class="page active">
                <section class="welcome-section">
                    <h1 id="welcomeTitle">Bem-vindo ao seu Portal!</h1>
                    <p>Aqui você gerencia todos os seus serviços e conta com tecnologia de ponta.</p>
                </section>

                <div class="services-grid">
                    <div class="service-card">
                        <h3><i class="fas fa-cube" style="color: var(--verde);"></i> Plano de Serviço</h3>
                        <p>Gerencie seu plano atual com total controle e flexibilidade</p>
                        <button class="btn" onclick="mudarParaPagina('servicos')">Configurar</button>
                    </div>

                    <div class="service-card">
                        <h3><i class="fas fa-database" style="color: var(--azul);"></i> Backup</h3>
                        <p>Acesse o painel de controle de seus dados com segurança máxima</p>
                        <button class="btn" onclick="mudarParaPagina('servicos')">Acessar</button>
                    </div>

                    <div class="service-card">
                        <h3><i class="fas fa-info-circle" style="color: var(--roxo);"></i> Suporte</h3>
                        <p>Consulte informações referente ao uso do Software especializado</p>
                        <button class="btn" onclick="mudarParaPagina('ajuda')">Consultar</button>
                    </div>
                </div>

                <section class="status-section">
                    <h2 style="margin-bottom: 25px; color: var(--azul-escuro); font-size: 22px;">Status dos Serviços</h2>
                    
                    <div class="status-item">
                        <div>
                            <strong style="color: var(--azul-escuro);">Plano Atual</strong>
                            <p style="color: var(--cinza); font-size: 14px; margin-top: 6px;" id="planoAtual">Carregando...</p>
                        </div>
                        <span class="status-badge status-active" id="statusPlano">Ativo</span>
                    </div>

                    <div class="status-item">
                        <div>
                            <strong style="color: var(--azul-escuro);">Último backup realizado</strong>
                            <p style="color: var(--cinza); font-size: 14px; margin-top: 6px;" id="ultimoBackup">Carregando...</p>
                        </div>
                        <span class="status-badge status-active" id="statusBackup">Concluído</span>
                    </div>

                    <div class="status-item">
                        <div>
                            <strong style="color: var(--azul-escuro);">SSL Certificate</strong>
                            <p style="color: var(--cinza); font-size: 14px; margin-top: 6px;" id="sslInfo">Carregando...</p>
                        </div>
                        <span class="status-badge status-active" id="statusSSL">Ativo</span>
                    </div>
                </section>
            </div>

            <!-- DASHBOARD AVANÇADO -->
            <div id="dashboard" class="page">
                <div class="welcome-section">
                    <h1><i class="fas fa-chart-bar"></i> Dashboard de Gestão Empresarial</h1>
                    <p>Métricas financeiras, operacionais e de desempenho em tempo real</p>
                </div>

                <!-- CONTROLES DE VISUALIZAÇÃO -->
                <div class="visualization-controls">
                    <div class="view-type-selector">
                        <button class="view-type-btn active" data-view="overview">
                            <i class="fas fa-th-large"></i> Visão Geral
                        </button>
                        <button class="view-type-btn" data-view="financial">
                            <i class="fas fa-chart-line"></i> Financeiro
                        </button>
                        <button class="view-type-btn" data-view="operational">
                            <i class="fas fa-cogs"></i> Operacional
                        </button>
                        <button class="view-type-btn" data-view="commercial">
                            <i class="fas fa-shopping-cart"></i> Comercial
                        </button>
                    </div>
                    
                    <div style="display: flex; gap: 10px; align-items: center;">
                        <label style="color: var(--cinza-escuro); font-weight: 500;">Layout:</label>
                        <select class="form-control" style="width: auto;" id="layoutSelector">
                            <option value="1">1 Gráfico</option>
                            <option value="2" selected>2 Gráficos</option>
                            <option value="3">3 Gráficos</option>
                            <option value="4">4 Gráficos</option>
                        </select>
                    </div>
                    
                    <button class="btn" onclick="exportDashboard()">
                        <i class="fas fa-download"></i> Exportar
                    </button>
                </div>

                <!-- FILTROS AVANÇADOS -->
                <div class="advanced-filters">
                    <div class="filter-section">
                        <div class="filter-section-title">
                            <i class="fas fa-filter"></i> Filtros Principais
                        </div>
                        <div class="filter-group">
                            <select class="form-control" style="width: auto;" id="periodoFilter">
                                <option value="hoje">Hoje</option>
                                <option value="semana">Esta Semana</option>
                                <option value="mes" selected>Este Mês</option>
                                <option value="trimestre">Este Trimestre</option>
                                <option value="ano">Este Ano</option>
                            </select>
                            
                            <select class="form-control" style="width: auto;" id="comparacaoFilter">
                                <option value="nenhum">Sem Comparação</option>
                                <option value="mes_anterior">Mês Anterior</option>
                                <option value="ano_anterior">Ano Anterior</option>
                                <option value="meta">Vs. Meta</option>
                            </select>
                            
                            <select class="form-control" style="width: auto;" id="departamentoFilter">
                                <option value="todos">Todos Departamentos</option>
                                <option value="vendas">Vendas</option>
                                <option value="producao">Produção</option>
                                <option value="financeiro">Financeiro</option>
                                <option value="marketing">Marketing</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="filter-section">
                        <div class="filter-section-title">
                            <i class="fas fa-sliders-h"></i> Filtros Avançados
                        </div>
                        <div class="filter-group">
                            <input type="date" class="form-control" style="width: auto;" id="dataInicio">
                            <input type="date" class="form-control" style="width: auto;" id="dataFim">
                            
                            <select class="form-control" style="width: auto;" id="tipoGraficoFilter">
                                <option value="todos">Todos os Tipos</option>
                                <option value="linha">Gráficos de Linha</option>
                                <option value="barra">Gráficos de Barra</option>
                                <option value="pizza">Gráficos de Pizza</option>
                                <option value="area">Gráficos de Área</option>
                            </select>
                            
                            <button class="btn" onclick="aplicarFiltrosAvancados()">
                                <i class="fas fa-sync-alt"></i> Aplicar
                            </button>
                        </div>
                    </div>
                </div>

                <!-- CARDS DE MÉTRICAS PRINCIPAIS -->
                <div class="services-grid" id="metricsContainer">
                    <!-- Métricas carregadas via JavaScript -->
                </div>

                <!-- GRADE DE GRÁFICOS - VISÃO GERAL -->
                <div id="overview-view" class="chart-view active">
                    <div class="chart-grid grid-2" id="chartGrid">
                        <!-- Gráficos carregados via JavaScript -->
                    </div>
                </div>

                <!-- VISÕES ESPECÍFICAS -->
                <div id="financial-view" class="chart-view">
                    <div class="service-card">
                        <h3>Dashboard Financeiro</h3>
                        <p>Esta seção está em desenvolvimento e em breve terá gráficos específicos para análise financeira.</p>
                    </div>
                </div>

                <div id="operational-view" class="chart-view">
                    <div class="service-card">
                        <h3>Dashboard Operacional</h3>
                        <p>Esta seção está em desenvolvimento e em breve terá gráficos específicos para análise operacional.</p>
                    </div>
                </div>

                <div id="commercial-view" class="chart-view">
                    <div class="service-card">
                        <h3>Dashboard Comercial</h3>
                        <p>Esta seção está em desenvolvimento e em breve terá gráficos específicos para análise comercial.</p>
                    </div>
                </div>

                <!-- MÉTRICAS OPERACIONAIS -->
                <div class="services-grid">
                    <div class="service-card">
                        <h3><i class="fas fa-bolt" style="color: var(--verde);"></i> KPIs em Tempo Real</h3>
                        <div id="kpisContainer">
                            <!-- KPIs carregados via JavaScript -->
                        </div>
                    </div>

                    <div class="service-card">
                        <h3><i class="fas fa-exclamation-triangle" style="color: var(--laranja);"></i> Alertas do Sistema</h3>
                        <div id="alertasContainer">
                            <!-- Alertas carregados via JavaScript -->
                        </div>
                    </div>

                    <div class="service-card">
                        <h3><i class="fas fa-calculator" style="color: var(--roxo);"></i> Análise de Rentabilidade</h3>
                        <div id="rentabilidadeContainer">
                            <!-- Análise de rentabilidade carregada via JavaScript -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- PERFIL -->
            <div id="perfil" class="page">
                <div class="welcome-section">
                    <h1><i class="fas fa-user"></i> Meu Perfil</h1>
                    <p>Gerencie suas informações pessoais e preferências</p>
                </div>

                <div class="services-grid">
                    <div class="service-card">
                        <h3><i class="fas fa-user-edit" style="color: var(--verde);"></i> Informações Pessoais</h3>
                        <form id="perfilForm">
                            <div class="form-group">
                                <label>Nome Completo</label>
                                <input type="text" class="form-control" id="nomeCompleto" required>
                            </div>
                            <div class="form-group">
                                <label>E-mail</label>
                                <input type="email" class="form-control" id="emailPerfil" required>
                            </div>
                            <div class="form-group">
                                <label>Telefone</label>
                                <input type="tel" class="form-control" id="telefonePerfil">
                            </div>
                            <div class="form-group">
                                <label>Empresa</label>
                                <input type="text" class="form-control" id="empresaPerfil">
                            </div>
                            <button type="submit" class="btn" id="salvarPerfilBtn">
                                <i class="fas fa-save"></i>
                                Salvar Alterações
                            </button>
                        </form>
                    </div>

                    <div class="service-card">
                        <h3><i class="fas fa-shield-alt" style="color: var(--azul);"></i> Segurança</h3>
                        <form id="senhaForm">
                            <div class="form-group">
                                <label>Senha Atual</label>
                                <input type="password" class="form-control" id="senhaAtual" placeholder="Digite sua senha atual">
                            </div>
                            <div class="form-group">
                                <label>Nova Senha</label>
                                <input type="password" class="form-control" id="novaSenha" placeholder="Digite a nova senha">
                            </div>
                            <div class="form-group">
                                <label>Confirmar Nova Senha</label>
                                <input type="password" class="form-control" id="confirmarSenha" placeholder="Confirme a nova senha">
                            </div>
                            <button type="submit" class="btn" id="atualizarSenhaBtn">
                                <i class="fas fa-key"></i>
                                Atualizar Senha
                            </button>
                        </form>
                    </div>

                    <div class="service-card">
                        <h3><i class="fas fa-bell" style="color: var(--roxo);"></i> Preferências</h3>
                        <div id="preferenciasContainer">
                            <!-- Preferências carregadas via JavaScript -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- PAGAMENTOS -->
            <div id="pagamentos" class="page">
                <div class="welcome-section">
                    <h1><i class="fas fa-credit-card"></i> Pagamentos</h1>
                    <p>Gerencie suas formas de pagamento e faturas</p>
                </div>

                <div class="table">
                    <div class="table-header">
                        <h3>Formas de Pagamento</h3>
                    </div>
                    <div class="table-content" id="metodosPagamento">
                        <!-- Métodos carregados via JavaScript -->
                    </div>
                </div>

                <div class="service-card">
                    <h3><i class="fas fa-plus-circle" style="color: var(--verde);"></i> Adicionar Cartão</h3>
                    <form id="novoCartaoForm">
                        <div class="form-group">
                            <label>Número do Cartão</label>
                            <input type="text" class="form-control" id="numeroCartao" placeholder="**** **** **** ****" required>
                        </div>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                            <div class="form-group">
                                <label>Validade</label>
                                <input type="text" class="form-control" id="validadeCartao" placeholder="MM/AA" required>
                            </div>
                            <div class="form-group">
                                <label>CVV</label>
                                <input type="text" class="form-control" id="cvvCartao" placeholder="***" required>
                            </div>
                        </div>
                        <div class="form-group">
                            <label>Nome no Cartão</label>
                            <input type="text" class="form-control" id="nomeCartao" placeholder="Como está no cartão" required>
                        </div>
                        <button type="submit" class="btn" id="adicionarCartaoBtn">
                            <i class="fas fa-credit-card"></i>
                            Adicionar Cartão
                        </button>
                    </form>
                </div>

                <div class="service-card">
                    <h3><i class="fas fa-history" style="color: var(--azul);"></i> Histórico de Pagamentos</h3>
                    <div id="historicoPagamentos">
                        <!-- Histórico carregado via JavaScript -->
                    </div>
                </div>
            </div>

            <!-- AJUDA -->
            <div id="ajuda" class="page">
                <div class="welcome-section">
                    <h1><i class="fas fa-headset"></i> Ajuda & Suporte</h1>
                    <p>Encontre respostas para suas dúvidas e entre em contato</p>
                </div>

                <div class="services-grid">
                    <div class="service-card">
                        <h3><i class="fas fa-question-circle" style="color: var(--azul);"></i> FAQ - Dúvidas Frequentes</h3>
                        <div id="faqContainer">
                            <!-- FAQ carregado via JavaScript -->
                        </div>
                    </div>

                    <div class="service-card">
                        <h3><i class="fas fa-envelope" style="color: var(--verde);"></i> Contato Direto</h3>
                        <form id="ticketForm">
                            <div class="form-group">
                                <label>Assunto</label>
                                <select class="form-control" id="assuntoTicket" required>
                                    <option value="">Selecione um assunto</option>
                                    <option>Dúvida técnica</option>
                                    <option>Problema com pagamento</option>
                                    <option>Sugestão de melhoria</option>
                                    <option>Relatar problema</option>
                                    <option>Outro</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Descrição Detalhada</label>
                                <textarea class="form-control" id="descricaoTicket" rows="5" placeholder="Descreva sua dúvida ou problema com detalhes..." required></textarea>
                            </div>
                            <div class="form-group">
                                <label>Anexar Arquivo (Opcional)</label>
                                <input type="file" class="form-control" id="anexoTicket">
                            </div>
                            <button type="submit" class="btn" id="enviarTicketBtn">
                                <i class="fas fa-paper-plane"></i>
                                Enviar Mensagem
                            </button>
                        </form>
                    </div>

                    <div class="service-card">
                        <h3><i class="fas fa-phone-alt" style="color: var(--roxo);"></i> Canais de Atendimento</h3>
                        <div id="canaisAtendimento">
                            <!-- Canais carregados via JavaScript -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- SERVIÇOS -->
            <div id="servicos" class="page">
                <div class="welcome-section">
                    <h1><i class="fas fa-server"></i> Meus Serviços</h1>
                    <p>Gerencie todos os seus serviços contratados</p>
                </div>

                <div class="services-grid" id="servicosContainer">
                    <!-- Serviços carregados via JavaScript -->
                </div>

                <div class="table">
                    <div class="table-header">
                        <h3>Histórico de Serviços</h3>
                    </div>
                    <div class="table-content" id="historicoServicos">
                        <!-- Histórico carregado via JavaScript -->
                    </div>
                </div>
            </div>

            <!-- FATURAS -->
            <div id="faturas" class="page">
                <div class="welcome-section">
                    <h1><i class="fas fa-file-invoice"></i> Faturas</h1>
                    <p>Visualize e baixe suas faturas</p>
                </div>

                <div class="table">
                    <div class="table-header">
                        <h3>Histórico de Faturas</h3>
                    </div>
                    <div class="table-content" id="faturasContainer">
                        <!-- Faturas carregadas via JavaScript -->
                    </div>
                </div>

                <div class="services-grid">
                    <div class="service-card">
                        <h3><i class="fas fa-file-invoice-dollar" style="color: var(--laranja);"></i> Próxima Fatura</h3>
                        <div id="proximaFatura">
                            <!-- Próxima fatura carregada via JavaScript -->
                        </div>
                    </div>

                    <div class="service-card">
                        <h3><i class="fas fa-chart-bar" style="color: var(--azul);"></i> Resumo Financeiro</h3>
                        <div id="resumoFinanceiro">
                            <!-- Resumo carregado via JavaScript -->
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- MODAL PARA GRÁFICOS EXPANDIDOS -->
    <div class="chart-modal" id="chartModal">
        <div class="modal-content">
            <button class="modal-close" onclick="closeChartModal()">&times;</button>
            <div class="chart-header">
                <h3 id="modalChartTitle">Título do Gráfico</h3>
                <div class="chart-actions">
                    <select id="modalChartTypeSelector">
                        <option value="line">Linha</option>
                        <option value="bar">Barra</option>
                        <option value="pie">Pizza</option>
                        <option value="doughnut">Rosca</option>
                        <option value="area">Área</option>
                        <option value="radar">Radar</option>
                        <option value="polarArea">Área Polar</option>
                    </select>
                    <button class="btn" onclick="exportChart()">
                        <i class="fas fa-download"></i> Exportar
                    </button>
                </div>
            </div>
            <div class="modal-chart-container">
                <canvas id="modalChart"></canvas>
            </div>
        </div>
    </div>

    <script>
        // ========== CONFIGURAÇÃO ==========
        const API_BASE = 'http://localhost:3000/api';
        let token = localStorage.getItem('token');
        let userData = null;
        let charts = {};
        let currentExpandedChart = null;
        let modalChart = null;

        // ========== VERIFICAÇÃO DE LOGIN ==========
        function verificarLogin() {
            if (!token) {
                window.location.href = 'login.html';
                return false;
            }
            
            userData = JSON.parse(localStorage.getItem('user'));
            if (!userData) {
                window.location.href = 'login.html';
                return false;
            }
            
            atualizarInterfaceUsuario();
            return true;
        }

        function atualizarInterfaceUsuario() {
            if (userData) {
                document.getElementById('userGreeting').textContent = `Olá, ${userData.nome.split(' ')[0]}!`;
                document.getElementById('welcomeTitle').textContent = `Bem-vindo, ${userData.nome.split(' ')[0]}!`;
            }
        }

        // ========== FUNÇÕES DE API ==========
        async function apiRequest(endpoint, options = {}) {
            if (!token) {
                window.location.href = 'login.html';
                return null;
            }

            const defaultOptions = {
                headers: {
                    'Authorization': `Bearer ${token}`,
                    'Content-Type': 'application/json'
                }
            };

            try {
                showLoading();
                const response = await fetch(`${API_BASE}${endpoint}`, {
                    ...defaultOptions,
                    ...options
                });

                if (response.status === 401) {
                    logout();
                    return null;
                }

                if (!response.ok) {
                    throw new Error(`Erro ${response.status}: ${response.statusText}`);
                }

                const data = await response.json();
                hideLoading();
                return data;
            } catch (error) {
                console.error('Erro na requisição:', error);
                hideLoading();
                alert('Erro ao carregar dados. Tente novamente.');
                return null;
            }
        }

        // ========== FUNÇÕES DE CARREGAMENTO ==========
        async function carregarDadosInicio() {
            const servicos = await apiRequest('/servicos');
            if (servicos) {
                document.getElementById('planoAtual').textContent = servicos.plano_atual.nome;
                document.getElementById('ultimoBackup').textContent = servicos.backup.ultimo_backup;
                document.getElementById('sslInfo').textContent = `Válido até ${servicos.seguranca.ssl.validade}`;
            }
        }

        async function carregarDashboard() {
            // Carregar métricas
            const metrics = await apiRequest('/dashboard/metrics');
            if (metrics) {
                const metricsHTML = `
                    <div class="metric-card">
                        <i class="fas fa-cash-register" style="color: var(--verde); font-size: 28px;"></i>
                        <div class="metric-value">R$ ${metrics.faturamento.toLocaleString('pt-BR', {minimumFractionDigits: 2})}</div>
                        <div class="metric-label">Faturamento Bruto</div>
                        <div class="metric-trend trend-up">
                            <i class="fas fa-arrow-up"></i> ${metrics.tendencias.faturamento} vs mês anterior
                        </div>
                    </div>

                    <div class="metric-card vermelho">
                        <i class="fas fa-file-invoice-dollar" style="color: var(--vermelho); font-size: 28px;"></i>
                        <div class="metric-value">R$ ${metrics.contasReceber.toLocaleString('pt-BR', {minimumFractionDigits: 2})}</div>
                        <div class="metric-label">Contas a Receber</div>
                        <div class="metric-trend trend-down">
                            <i class="fas fa-arrow-down"></i> ${metrics.tendencias.contasReceber} vs mês anterior
                        </div>
                    </div>

                    <div class="metric-card azul">
                        <i class="fas fa-file-invoice" style="color: var(--azul); font-size: 28px;"></i>
                        <div class="metric-value">R$ ${metrics.contasPagar.toLocaleString('pt-BR', {minimumFractionDigits: 2})}</div>
                        <div class="metric-label">Contas a Pagar</div>
                        <div class="metric-trend trend-up">
                            <i class="fas fa-arrow-up"></i> ${metrics.tendencias.contasPagar} vs mês anterior
                        </div>
                    </div>

                    <div class="metric-card laranja">
                        <div style="display: flex; justify-content: space-between; align-items: center;">
                            <i class="fas fa-percentage" style="color: var(--laranja); font-size: 28px;"></i>
                            <div style="font-size: 14px; font-weight: 600; color: var(--laranja);">${metrics.margemLucro}%</div>
                        </div>
                        <div class="metric-value">R$ ${metrics.lucroLiquido.toLocaleString('pt-BR', {minimumFractionDigits: 2})}</div>
                        <div class="metric-label">Lucro Líquido</div>
                        <div class="metric-trend trend-up">
                            <i class="fas fa-arrow-up"></i> ${metrics.tendencias.lucroLiquido} vs mês anterior
                        </div>
                    </div>
                `;
                document.getElementById('metricsContainer').innerHTML = metricsHTML;
            }

            // Carregar gráficos
            const graficos = await apiRequest('/dashboard/graficos');
            if (graficos) {
                inicializarGraficos(graficos);
            }

            // Carregar KPIs
            const kpisHTML = `
                <div style="margin-top: 15px;">
                    <div style="display: flex; justify-content: space-between; margin: 12px 0; padding: 10px 0; border-bottom: 1px solid #f1f5f9;">
                        <span style="color: var(--cinza);">Margem líquida:</span>
                        <strong style="color: var(--verde);">24.5%</strong>
                    </div>
                    <div style="display: flex; justify-content: space-between; margin: 12px 0; padding: 10px 0; border-bottom: 1px solid #f1f5f9;">
                        <span style="color: var(--cinza);">Prazo médio receb.:</span>
                        <strong style="color: var(--azul-escuro);">28 dias</strong>
                    </div>
                    <div style="display: flex; justify-content: space-between; margin: 12px 0; padding: 10px 0; border-bottom: 1px solid #f1f5f9;">
                        <span style="color: var(--cinza);">Giro estoque:</span>
                        <strong style="color: var(--azul-escuro);">2.8x</strong>
                    </div>
                    <div style="display: flex; justify-content: space-between; margin: 12px 0; padding: 10px 0; border-bottom: 1px solid #f1f5f9;">
                        <span style="color: var(--cinza);">NPS Clientes:</span>
                        <strong style="color: var(--verde);">8.2</strong>
                    </div>
                    <div style="display: flex; justify-content: space-between; margin: 12px 0; padding: 10px 0;">
                        <span style="color: var(--cinza);">ROI:</span>
                        <strong style="color: var(--verde);">18.7%</strong>
                    </div>
                </div>
            `;
            document.getElementById('kpisContainer').innerHTML = kpisHTML;

            // Carregar alertas
            const alertasHTML = `
                <div style="margin-top: 20px;">
                    <div style="background: linear-gradient(135deg, #fef3c7, #fde68a); padding: 15px; border-radius: 12px; margin-bottom: 12px; border-left: 4px solid #f59e0b;">
                        <i class="fas fa-exclamation-circle" style="color: #d97706;"></i>
                        <strong style="color: #92400e; margin-left: 10px;">5 produtos com estoque baixo</strong>
                    </div>
                    <div style="background: linear-gradient(135deg, #fee2e2, #fca5a5); padding: 15px; border-radius: 12px; margin-bottom: 12px; border-left: 4px solid #ef4444;">
                        <i class="fas fa-exclamation-circle" style="color: #dc2626;"></i>
                        <strong style="color: #991b1b; margin-left: 10px;">3 clientes com pagamento atrasado</strong>
                    </div>
                    <div style="background: linear-gradient(135deg, #dbeafe, #93c5fd); padding: 15px; border-radius: 12px; margin-bottom: 12px; border-left: 4px solid #3b82f6;">
                        <i class="fas fa-info-circle" style="color: #1d4ed8;"></i>
                        <strong style="color: #1e3a8a; margin-left: 10px;">2 fornecedores com entrega atrasada</strong>
                    </div>
                    <div style="background: linear-gradient(135deg, #dcfce7, #86efac); padding: 15px; border-radius: 12px; border-left: 4px solid #16a34a;">
                        <i class="fas fa-check-circle" style="color: #15803d;"></i>
                        <strong style="color: #166534; margin-left: 10px;">Meta de vendas do mês atingida</strong>
                    </div>
                </div>
            `;
            document.getElementById('alertasContainer').innerHTML = alertasHTML;

            // Carregar rentabilidade
            const rentabilidadeHTML = `
                <div style="margin-top: 20px;">
                    <div style="display: flex; justify-content: space-between; margin: 12px 0; padding: 10px 0; border-bottom: 1px solid #f1f5f9;">
                        <span style="color: var(--cinza);">ROI Projetos:</span>
                        <strong style="color: var(--verde);">22.3%</strong>
                    </div>
                    <div style="display: flex; justify-content: space-between; margin: 12px 0; padding: 10px 0; border-bottom: 1px solid #f1f5f9;">
                        <span style="color: var(--cinza);">Margem Produto A:</span>
                        <strong style="color: var(--verde);">35.2%</strong>
                    </div>
                    <div style="display: flex; justify-content: space-between; margin: 12px 0; padding: 10px 0; border-bottom: 1px solid #f1f5f9;">
                        <span style="color: var(--cinza);">Margem Produto B:</span>
                        <strong style="color: var(--laranja);">18.7%</strong>
                    </div>
                    <div style="display: flex; justify-content: space-between; margin: 12px 0; padding: 10px 0;">
                        <span style="color: var(--cinza);">Custo/Benefício:</span>
                        <strong style="color: var(--verde);">1.8</strong>
                    </div>
                </div>
                <div style="margin-top: 20px; padding: 15px; background: var(--cinza-claro); border-radius: 10px;">
                    <div style="font-size: 14px; color: var(--cinza);">Recomendação:</div>
                    <div style="font-weight: 600; color: var(--azul-escuro); margin-top: 5px;">Aumentar produção do Produto A</div>
                </div>
            `;
            document.getElementById('rentabilidadeContainer').innerHTML = rentabilidadeHTML;
        }

        async function carregarPerfil() {
            const perfil = await apiRequest('/perfil');
            if (perfil) {
                document.getElementById('nomeCompleto').value = perfil.nome;
                document.getElementById('emailPerfil').value = perfil.email;
                document.getElementById('telefonePerfil').value = perfil.telefone;
                document.getElementById('empresaPerfil').value = perfil.empresa;
            }

            // Carregar preferências
            const preferenciasHTML = `
                <div style="margin-top: 15px;">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; padding: 10px; background: var(--cinza-claro); border-radius: 8px;">
                        <span>Notificações por E-mail</span>
                        <label class="switch">
                            <input type="checkbox" checked>
                            <span class="slider"></span>
                        </label>
                    </div>
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; padding: 10px; background: var(--cinza-claro); border-radius: 8px;">
                        <span>Alertas de Segurança</span>
                        <label class="switch">
                            <input type="checkbox" checked>
                            <span class="slider"></span>
                        </label>
                    </div>
                    <div style="display: flex; justify-content: space-between; align-items: center; padding: 10px; background: var(--cinza-claro); border-radius: 8px;">
                        <span>Relatórios Semanais</span>
                        <label class="switch">
                            <input type="checkbox">
                            <span class="slider"></span>
                        </label>
                    </div>
                </div>
            `;
            document.getElementById('preferenciasContainer').innerHTML = preferenciasHTML;
        }

        async function carregarPagamentos() {
            const metodos = await apiRequest('/pagamentos/metodos');
            const historico = await apiRequest('/pagamentos/historico');

            if (metodos) {
                const metodosHTML = metodos.map(metodo => `
                    <div class="table-row">
                        <div class="col-2">
                            <strong>${metodo.tipo}</strong>
                            <p style="color: var(--cinza); font-size: 14px; margin-top: 5px;">${metodo.numero_cartao}</p>
                        </div>
                        <div class="col">
                            <strong>Vencimento</strong>
                            <p style="color: var(--cinza); font-size: 14px; margin-top: 5px;">${metodo.validade}</p>
                        </div>
                        <div class="col">
                            <span class="status-badge status-active">${metodo.principal ? 'Principal' : ''}</span>
                        </div>
                        <div class="col">
                            <button class="btn btn-outline">Alterar</button>
                        </div>
                    </div>
                `).join('');
                document.getElementById('metodosPagamento').innerHTML = metodosHTML;
            }

            if (historico) {
                const historicoHTML = historico.map(pagamento => `
                    <div style="display: flex; justify-content: space-between; align-items: center; padding: 12px; background: var(--cinza-claro); border-radius: 8px; margin-bottom: 10px;">
                        <div>
                            <strong>${pagamento.data}</strong>
                            <p style="color: var(--cinza); font-size: 12px; margin: 0;">${pagamento.descricao}</p>
                        </div>
                        <div style="text-align: right;">
                            <strong>R$ ${pagamento.valor.toFixed(2)}</strong>
                            <p style="color: var(--verde); font-size: 12px; margin: 0;">${pagamento.status}</p>
                        </div>
                    </div>
                `).join('');
                document.getElementById('historicoPagamentos').innerHTML = historicoHTML;
            }
        }

        async function carregarAjuda() {
            const faq = await apiRequest('/suporte/faq');
            if (faq) {
                const faqHTML = faq.map(item => `
                    <div class="faq-item">
                        <div class="faq-question">
                            ${item.pergunta}
                            <i class="fas fa-chevron-down"></i>
                        </div>
                        <div class="faq-answer">
                            ${item.resposta}
                        </div>
                    </div>
                `).join('');
                document.getElementById('faqContainer').innerHTML = faqHTML;

                // Re-inicializar accordion
                document.querySelectorAll('.faq-question').forEach(question => {
                    question.addEventListener('click', function() {
                        const faqItem = this.parentElement;
                        faqItem.classList.toggle('active');
                    });
                });
            }

            // Carregar canais de atendimento
            const canaisHTML = `
                <div style="margin-top: 20px;">
                    <div style="display: flex; align-items: center; gap: 15px; margin-bottom: 20px; padding: 15px; background: var(--cinza-claro); border-radius: 10px;">
                        <i class="fas fa-envelope" style="color: var(--verde); font-size: 20px;"></i>
                        <div>
                            <strong>E-mail</strong>
                            <p style="color: var(--cinza); margin: 5px 0 0 0;">suporte@automahost.com.br</p>
                        </div>
                    </div>
                    <div style="display: flex; align-items: center; gap: 15px; margin-bottom: 20px; padding: 15px; background: var(--cinza-claro); border-radius: 10px;">
                        <i class="fas fa-phone" style="color: var(--azul); font-size: 20px;"></i>
                        <div>
                            <strong>Telefone</strong>
                            <p style="color: var(--cinza); margin: 5px 0 0 0;">(11) 4004-1234</p>
                        </div>
                    </div>
                    <div style="display: flex; align-items: center; gap: 15px; padding: 15px; background: var(--cinza-claro); border-radius: 10px;">
                        <i class="fas fa-clock" style="color: var(--laranja); font-size: 20px;"></i>
                        <div>
                            <strong>Horário de Atendimento</strong>
                            <p style="color: var(--cinza); margin: 5px 0 0 0;">Segunda a Sexta: 8h às 18h</p>
                        </div>
                    </div>
                </div>
            `;
            document.getElementById('canaisAtendimento').innerHTML = canaisHTML;
        }

        async function carregarServicos() {
            const servicos = await apiRequest('/servicos');
            if (servicos) {
                const servicosHTML = `
                    <div class="service-card">
                        <h3><i class="fas fa-cube" style="color: var(--verde);"></i> ${servicos.plano_atual.nome}</h3>
                        <div class="status-item">
                            <div>
                                <strong>${servicos.plano_atual.nome}</strong>
                                <p style="color: var(--cinza); font-size: 14px; margin-top: 5px;">R$ ${servicos.plano_atual.valor}/mês</p>
                            </div>
                            <span class="status-badge status-active">${servicos.plano_atual.status}</span>
                        </div>
                        <p><strong>Recursos incluídos:</strong></p>
                        <ul style="color: var(--cinza); margin: 10px 0 20px 20px; line-height: 1.6;">
                            ${servicos.plano_atual.recursos.map(recurso => `<li>${recurso}</li>`).join('')}
                        </ul>
                        <div style="display: flex; gap: 10px;">
                            <button class="btn">Fazer Upgrade</button>
                            <button class="btn btn-outline">Alterar Plano</button>
                        </div>
                    </div>

                    <div class="service-card">
                        <h3><i class="fas fa-database" style="color: var(--azul);"></i> Backup</h3>
                        <div class="status-item">
                            <div>
                                <strong>Último Backup</strong>
                                <p style="color: var(--cinza); font-size: 14px; margin-top: 5px;">${servicos.backup.ultimo_backup}</p>
                            </div>
                            <span class="status-badge status-active">${servicos.backup.status}</span>
                        </div>
                        <p>Espaço utilizado: <strong>${servicos.backup.espaco_utilizado}</strong></p>
                        <div style="background: #e9ecef; height: 12px; border-radius: 6px; margin: 15px 0; overflow: hidden;">
                            <div style="background: linear-gradient(90deg, var(--verde), var(--azul)); height: 100%; width: ${servicos.backup.percentual_uso}%; border-radius: 6px;"></div>
                        </div>
                        <div style="display: flex; gap: 10px; margin-top: 15px;">
                            <button class="btn">
                                <i class="fas fa-play"></i>
                                Backup Agora
                            </button>
                            <button class="btn btn-outline">
                                <i class="fas fa-history"></i>
                                Histórico
                            </button>
                        </div>
                    </div>

                    <div class="service-card">
                        <h3><i class="fas fa-shield-alt" style="color: var(--roxo);"></i> Segurança</h3>
                        <div class="status-item">
                            <div>
                                <strong>SSL Certificate</strong>
                                <p style="color: var(--cinza); font-size: 14px; margin-top: 5px;">Válido até ${servicos.seguranca.ssl.validade}</p>
                            </div>
                            <span class="status-badge status-active">${servicos.seguranca.ssl.status}</span>
                        </div>
                        <div style="margin: 20px 0;">
                            <div style="display: flex; justify-content: space-between; margin: 10px 0;">
                                <span>Firewall:</span>
                                <strong style="color: var(--verde);">${servicos.seguranca.firewall}</strong>
                            </div>
                            <div style="display: flex; justify-content: space-between; margin: 10px 0;">
                                <span>Proteção DDoS:</span>
                                <strong style="color: var(--verde);">${servicos.seguranca.protecao_ddos}</strong>
                            </div>
                            <div style="display: flex; justify-content: space-between; margin: 10px 0;">
                                <span>Monitoramento:</span>
                                <strong style="color: var(--verde);">${servicos.seguranca.monitoramento}</strong>
                            </div>
                        </div>
                        <button class="btn btn-outline">Configurações</button>
                    </div>
                `;
                document.getElementById('servicosContainer').innerHTML = servicosHTML;
            }

            // Carregar histórico de serviços
            const historicoHTML = `
                <div class="table-row">
                    <div class="col-2">
                        <strong>Backup Automático</strong>
                        <p style="color: var(--cinza); font-size: 14px; margin-top: 5px;">15/01/2024 12:30</p>
                    </div>
                    <div class="col">
                        <span class="status-badge status-active">Concluído</span>
                    </div>
                    <div class="col-2">
                        2.1 GB processados
                    </div>
                    <div class="col">
                        <button class="btn btn-outline" style="padding: 5px 10px; font-size: 12px;">Detalhes</button>
                    </div>
                </div>
                <div class="table-row">
                    <div class="col-2">
                        <strong>Atualização de Sistema</strong>
                        <p style="color: var(--cinza); font-size: 14px; margin-top: 5px;">14/01/2024 03:00</p>
                    </div>
                    <div class="col">
                        <span class="status-badge status-active">Concluído</span>
                    </div>
                    <div class="col-2">
                        Versão 2.1.3 instalada
                    </div>
                    <div class="col">
                        <button class="btn btn-outline" style="padding: 5px 10px; font-size: 12px;">Detalhes</button>
                    </div>
                </div>
                <div class="table-row">
                    <div class="col-2">
                        <strong>Verificação de Segurança</strong>
                        <p style="color: var(--cinza); font-size: 14px; margin-top: 5px;">13/01/2024 23:15</p>
                    </div>
                    <div class="col">
                        <span class="status-badge status-active">Concluído</span>
                    </div>
                    <div class="col-2">
                        Nenhuma ameaça detectada
                    </div>
                    <div class="col">
                        <button class="btn btn-outline" style="padding: 5px 10px; font-size: 12px;">Detalhes</button>
                    </div>
                </div>
            `;
            document.getElementById('historicoServicos').innerHTML = historicoHTML;
        }

        async function carregarFaturas() {
            const faturas = await apiRequest('/faturas');
            const proxima = await apiRequest('/faturas/proxima');

            if (faturas) {
                const faturasHTML = faturas.map(fatura => `
                    <div class="table-row">
                        <div class="col">
                            <strong>${fatura.numero}</strong>
                            <p style="color: var(--cinza); font-size: 14px; margin-top: 5px;">${fatura.data_emissao}</p>
                        </div>
                        <div class="col-2">
                            <strong>Plano Business Premium</strong>
                            <p style="color: var(--cinza); font-size: 14px; margin-top: 5px;">Período: ${fatura.periodo}</p>
                        </div>
                        <div class="col">
                            <strong>R$ ${fatura.valor.toFixed(2)}</strong>
                        </div>
                        <div class="col">
                            <span class="status-badge status-active">${fatura.status}</span>
                        </div>
                        <div class="col">
                            <button class="btn btn-outline">
                                <i class="fas fa-download"></i>
                                PDF
                            </button>
                        </div>
                    </div>
                `).join('');
                document.getElementById('faturasContainer').innerHTML = faturasHTML;
            }

            if (proxima) {
                document.getElementById('proximaFatura').innerHTML = `
                    <div class="status-item">
                        <div>
                            <strong>Vencimento: ${proxima.data_vencimento}</strong>
                            <p style="color: var(--cinza); font-size: 14px; margin-top: 5px;">Plano Business Premium - R$ ${proxima.valor}</p>
                        </div>
                        <span class="status-badge status-pending">${proxima.status}</span>
                    </div>
                    <div style="margin-top: 20px;">
                        <p style="color: var(--cinza); margin-bottom: 15px;">Forma de pagamento atual:</p>
                        <div style="display: flex; align-items: center; gap: 10px; padding: 12px; background: var(--cinza-claro); border-radius: 8px;">
                            <i class="fas fa-credit-card" style="color: var(--verde);"></i>
                            <div>
                                <strong>Cartão Crédito</strong>
                                <p style="color: var(--cinza); margin: 0; font-size: 12px;">**** **** **** 1234</p>
                            </div>
                        </div>
                    </div>
                    <button class="btn" style="margin-top: 20px; width: 100%;">
                        <i class="fas fa-credit-card"></i>
                        Pagar Agora
                    </button>
                `;
            }

            // Carregar resumo financeiro
            const resumoHTML = `
                <div style="margin-top: 20px;">
                    <div style="display: flex; justify-content: space-between; margin: 15px 0; padding-bottom: 10px; border-bottom: 1px solid #f1f5f9;">
                        <span>Total Pago (2024):</span>
                        <strong>R$ 299,90</strong>
                    </div>
                    <div style="display: flex; justify-content: space-between; margin: 15px 0; padding-bottom: 10px; border-bottom: 1px solid #f1f5f9;">
                        <span>Próximo Vencimento:</span>
                        <strong>15/02/2024</strong>
                    </div>
                    <div style="display: flex; justify-content: space-between; margin: 15px 0;">
                        <span>Status da Conta:</span>
                        <strong style="color: var(--verde);">Em Dia</strong>
                    </div>
                </div>
                <div style="background: var(--cinza-claro); padding: 15px; border-radius: 8px; margin-top: 15px;">
                    <p style="color: var(--cinza); font-size: 12px; margin: 0;">
                        <i class="fas fa-info-circle" style="color: var(--azul);"></i>
                        Sua conta está em dia. Próxima cobrança em 15/02/2024.
                    </p>
                </div>
            `;
            document.getElementById('resumoFinanceiro').innerHTML = resumoHTML;
        }

        // ========== FUNÇÕES DE GRÁFICOS ==========
        function inicializarGraficos(graficosData) {
            // Destruir gráficos existentes
            Object.values(charts).forEach(chart => {
                if (chart) chart.destroy();
            });
            charts = {};

            // Inicializar gráficos com dados da API
            if (graficosData.fluxoCaixa) {
                const container = document.createElement('div');
                container.className = 'chart-card';
                container.innerHTML = `
                    <div class="chart-header">
                        <h3><i class="fas fa-chart-line" style="color: var(--verde);"></i> Fluxo de Caixa - Comparativo</h3>
                        <div class="chart-actions">
                            <select class="chart-type-selector" data-chart="fluxoCaixa">
                                <option value="line">Linha</option>
                                <option value="bar">Barra</option>
                                <option value="area">Área</option>
                            </select>
                            <button class="chart-action-btn" onclick="expandChart('fluxoCaixa')">
                                <i class="fas fa-expand"></i>
                            </button>
                        </div>
                    </div>
                    <div class="chart-container">
                        <canvas id="graficoFluxoCaixa"></canvas>
                    </div>
                    <div class="performance-indicators">
                        <div class="performance-item performance-positive">
                            <i class="fas fa-arrow-up"></i> Entradas: +12%
                        </div>
                        <div class="performance-item performance-negative">
                            <i class="fas fa-arrow-down"></i> Saídas: +8%
                        </div>
                        <div class="performance-item performance-positive">
                            <i class="fas fa-chart-line"></i> Saldo: +15%
                        </div>
                    </div>
                `;
                document.getElementById('chartGrid').appendChild(container);

                const ctx = document.getElementById('graficoFluxoCaixa').getContext('2d');
                charts.fluxoCaixa = new Chart(ctx, {
                    type: 'line',
                    data: graficosData.fluxoCaixa,
                    options: {
                        responsive: true,
                        maintainAspectRatio: false
                    }
                });
            }

            // Adicionar mais gráficos conforme necessário...
        }

        // ========== FUNÇÕES UTILITÁRIAS ==========
        function showLoading() {
            document.getElementById('loadingOverlay').classList.add('active');
        }

        function hideLoading() {
            document.getElementById('loadingOverlay').classList.remove('active');
        }

        function logout() {
            localStorage.removeItem('token');
            localStorage.removeItem('user');
            window.location.href = 'login.html';
        }

        function mudarParaPagina(pagina) {
            document.querySelectorAll('.menu-item').forEach(item => {
                if (item.dataset.page === pagina) {
                    item.click();
                }
            });
        }

        // ========== FUNÇÕES DO DASHBOARD ==========
        function exportDashboard() {
            alert('Dashboard exportado com sucesso!');
        }

        function aplicarFiltrosAvancados() {
            alert('Filtros aplicados com sucesso!');
        }

        function expandChart(chartId) {
            alert(`Gráfico ${chartId} expandido!`);
        }

        function closeChartModal() {
            document.getElementById('chartModal').classList.remove('active');
        }

        function exportChart() {
            alert('Gráfico exportado com sucesso!');
        }

        // ========== EVENT LISTENERS ==========
        document.addEventListener('DOMContentLoaded', function() {
            // Verificar login
            if (!verificarLogin()) return;

            // Carregar dados iniciais
            carregarDadosInicio();

            // Navegação entre páginas
            document.querySelectorAll('.menu-item').forEach(item => {
                item.addEventListener('click', function() {
                    if (this.id === 'logoutBtn') {
                        if (confirm('Deseja realmente sair?')) {
                            logout();
                        }
                        return;
                    }

                    if (this.dataset.page) {
                        // Remove active de todos os menus
                        document.querySelectorAll('.menu-item').forEach(i => i.classList.remove('active'));
                        // Adiciona active no menu clicado
                        this.classList.add('active');
                        
                        // Esconde todas as páginas
                        document.querySelectorAll('.page').forEach(page => page.classList.remove('active'));
                        // Mostra a página correspondente
                        document.getElementById(this.dataset.page).classList.add('active');
                        
                        // Carrega dados específicos da página
                        switch(this.dataset.page) {
                            case 'dashboard':
                                carregarDashboard();
                                break;
                            case 'perfil':
                                carregarPerfil();
                                break;
                            case 'pagamentos':
                                carregarPagamentos();
                                break;
                            case 'servicos':
                                carregarServicos();
                                break;
                            case 'faturas':
                                carregarFaturas();
                                break;
                            case 'ajuda':
                                carregarAjuda();
                                break;
                        }
                    }
                });
            });

            // Formulário de perfil
            document.getElementById('perfilForm').addEventListener('submit', async function(e) {
                e.preventDefault();
                const btn = document.getElementById('salvarPerfilBtn');
                const originalText = btn.innerHTML;
                
                btn.innerHTML = '<div class="loading"></div> Salvando...';
                btn.disabled = true;

                // Simular salvamento
                setTimeout(() => {
                    btn.innerHTML = originalText;
                    btn.disabled = false;
                    alert('Perfil atualizado com sucesso!');
                }, 1500);
            });

            // Formulário de senha
            document.getElementById('senhaForm').addEventListener('submit', async function(e) {
                e.preventDefault();
                const btn = document.getElementById('atualizarSenhaBtn');
                const originalText = btn.innerHTML;
                
                btn.innerHTML = '<div class="loading"></div> Atualizando...';
                btn.disabled = true;

                // Simular atualização
                setTimeout(() => {
                    btn.innerHTML = originalText;
                    btn.disabled = false;
                    alert('Senha atualizada com sucesso!');
                    document.getElementById('senhaForm').reset();
                }, 1500);
            });

            // Formulário de novo cartão
            document.getElementById('novoCartaoForm').addEventListener('submit', async function(e) {
                e.preventDefault();
                const btn = document.getElementById('adicionarCartaoBtn');
                const originalText = btn.innerHTML;
                
                btn.innerHTML = '<div class="loading"></div> Adicionando...';
                btn.disabled = true;

                // Simular adição
                setTimeout(() => {
                    btn.innerHTML = originalText;
                    btn.disabled = false;
                    alert('Cartão adicionado com sucesso!');
                    document.getElementById('novoCartaoForm').reset();
                }, 1500);
            });

            // Formulário de ticket
            document.getElementById('ticketForm').addEventListener('submit', async function(e) {
                e.preventDefault();
                const btn = document.getElementById('enviarTicketBtn');
                const originalText = btn.innerHTML;
                
                btn.innerHTML = '<div class="loading"></div> Enviando...';
                btn.disabled = true;

                // Simular envio
                setTimeout(() => {
                    btn.innerHTML = originalText;
                    btn.disabled = false;
                    alert('Ticket enviado com sucesso! Em breve entraremos em contato.');
                    document.getElementById('ticketForm').reset();
                }, 2000);
            });

            // FAQ Accordion
            document.querySelectorAll('.faq-question').forEach(question => {
                question.addEventListener('click', function() {
                    const faqItem = this.parentElement;
                    faqItem.classList.toggle('active');
                });
            });

            // CSS para switches
            const style = document.createElement('style');
            style.textContent = `
                .switch {
                    position: relative;
                    display: inline-block;
                    width: 50px;
                    height: 24px;
                }
                
                .switch input {
                    opacity: 0;
                    width: 0;
                    height: 0;
                }
                
                .slider {
                    position: absolute;
                    cursor: pointer;
                    top: 0;
                    left: 0;
                    right: 0;
                    bottom: 0;
                    background-color: #ccc;
                    transition: .4s;
                    border-radius: 24px;
                }
                
                .slider:before {
                    position: absolute;
                    content: "";
                    height: 16px;
                    width: 16px;
                    left: 4px;
                    bottom: 4px;
                    background-color: white;
                    transition: .4s;
                    border-radius: 50%;
                }
                
                input:checked + .slider {
                    background-color: #61ce70;
                }
                
                input:checked + .slider:before {
                    transform: translateX(26px);
                }
            `;
            document.head.appendChild(style);
        });
    </script>
</body>
</html>
